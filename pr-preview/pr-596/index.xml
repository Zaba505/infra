<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Zaba505's Home Lab</title><link>https://zaba505.github.io/infra/pr-preview/pr-596/</link><description>Recent content on Zaba505's Home Lab</description><generator>Hugo</generator><language>en-us</language><atom:link href="https://zaba505.github.io/infra/pr-preview/pr-596/index.xml" rel="self" type="application/rss+xml"/><item><title>[0001] Use MADR for Architecture Decision Records</title><link>https://zaba505.github.io/infra/pr-preview/pr-596/rd/adrs/0001-use-madr-for-architecture-decision-records/</link><pubDate>Sun, 16 Nov 2025 00:00:00 +0000</pubDate><guid>https://zaba505.github.io/infra/pr-preview/pr-596/rd/adrs/0001-use-madr-for-architecture-decision-records/</guid><description>&lt;!--
ADR Categories:
- strategic: High-level architectural decisions (frameworks, auth strategies, cross-cutting patterns)
- user-journey: Solutions for specific user journey problems (feature implementation approaches)
- api-design: API endpoint design decisions (pagination, filtering, bulk operations)
--&gt;
&lt;h2 id="context-and-problem-statement"&gt;Context and Problem Statement&lt;/h2&gt;
&lt;p&gt;As the project grows, architectural decisions are made that have long-term impacts on the system&amp;rsquo;s design, maintainability, and scalability. Without a structured way to document these decisions, we risk losing the context and rationale behind important choices, making it difficult for current and future team members to understand why certain approaches were taken.&lt;/p&gt;</description></item><item><title>[0002] Network Boot Architecture for Home Lab</title><link>https://zaba505.github.io/infra/pr-preview/pr-596/rd/adrs/0002-network-boot-architecture/</link><pubDate>Sun, 16 Nov 2025 00:00:00 +0000</pubDate><guid>https://zaba505.github.io/infra/pr-preview/pr-596/rd/adrs/0002-network-boot-architecture/</guid><description>&lt;!--
ADR Categories:
- strategic: High-level architectural decisions (frameworks, auth strategies, cross-cutting patterns)
- user-journey: Solutions for specific user journey problems (feature implementation approaches)
- api-design: API endpoint design decisions (pagination, filtering, bulk operations)
--&gt;
&lt;h2 id="context-and-problem-statement"&gt;Context and Problem Statement&lt;/h2&gt;
&lt;p&gt;When setting up a home lab infrastructure, servers need to be provisioned and booted over the network using PXE (Preboot Execution Environment). This requires a TFTP/HTTP server to serve boot files to requesting machines. The question is: where should this boot server be hosted to balance security, reliability, cost, and operational complexity?&lt;/p&gt;</description></item><item><title>Configuration Guide</title><link>https://zaba505.github.io/infra/pr-preview/pr-596/rd/analysis/hp_dl360_gen9/configuration/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://zaba505.github.io/infra/pr-preview/pr-596/rd/analysis/hp_dl360_gen9/configuration/</guid><description>&lt;h2 id="initial-setup"&gt;Initial Setup&lt;/h2&gt;
&lt;h3 id="hardware-assembly"&gt;Hardware Assembly&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Install Processors&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Use thermal paste (HPE thermal grease recommended)&lt;/li&gt;
&lt;li&gt;Align CPU carefully with socket (LGA 2011-3)&lt;/li&gt;
&lt;li&gt;Secure heatsink with proper torque (hand-tighten screws in cross pattern)&lt;/li&gt;
&lt;li&gt;Install both CPUs for dual-socket configuration&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Install Memory&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Populate channels evenly (see Memory Configuration below)&lt;/li&gt;
&lt;li&gt;Seat DIMMs firmly until retention clips engage&lt;/li&gt;
&lt;li&gt;Verify all DIMMs recognized in POST&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Install Storage&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Insert drives into hot-swap caddies&lt;/li&gt;
&lt;li&gt;Label drives clearly for identification&lt;/li&gt;
&lt;li&gt;Configure RAID controller (see Storage Configuration below)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Install Network Cards&lt;/strong&gt;:&lt;/p&gt;</description></item><item><title>Configuration Model</title><link>https://zaba505.github.io/infra/pr-preview/pr-596/rd/analysis/matchbox/configuration/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://zaba505.github.io/infra/pr-preview/pr-596/rd/analysis/matchbox/configuration/</guid><description>&lt;h1 id="matchbox-configuration-model"&gt;Matchbox Configuration Model&lt;/h1&gt;
&lt;p&gt;Matchbox uses a flexible configuration model based on &lt;strong&gt;Profiles&lt;/strong&gt; (what to provision) and &lt;strong&gt;Groups&lt;/strong&gt; (which machines get which profile), with support for templating and metadata.&lt;/p&gt;
&lt;h2 id="architecture-overview"&gt;Architecture Overview&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;┌─────────────────────────────────────────────────────────────┐
│ Matchbox Store │
│ ┌────────────┐ ┌────────────┐ ┌────────────┐ │
│ │ Profiles │ │ Groups │ │ Assets │ │
│ └────────────┘ └────────────┘ └────────────┘ │
│ │ │ │
│ │ │ │
│ ▼ ▼ │
│ ┌─────────────────────────────────────┐ │
│ │ Matcher Engine │ │
│ │ (Label-based group selection) │ │
│ └─────────────────────────────────────┘ │
│ │ │
│ ▼ │
│ ┌─────────────────────────────────────┐ │
│ │ Template Renderer │ │
│ │ (Go templates + metadata) │ │
│ └─────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
 │
 ▼
 Rendered Config (iPXE, Ignition, etc.)
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="data-directory-structure"&gt;Data Directory Structure&lt;/h2&gt;
&lt;p&gt;Matchbox uses a FileStore (default) that reads from &lt;code&gt;-data-path&lt;/code&gt; (default: &lt;code&gt;/var/lib/matchbox&lt;/code&gt;):&lt;/p&gt;</description></item><item><title>Deployment Patterns</title><link>https://zaba505.github.io/infra/pr-preview/pr-596/rd/analysis/matchbox/deployment/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://zaba505.github.io/infra/pr-preview/pr-596/rd/analysis/matchbox/deployment/</guid><description>&lt;h1 id="matchbox-deployment-patterns"&gt;Matchbox Deployment Patterns&lt;/h1&gt;
&lt;p&gt;Analysis of deployment architectures, installation methods, and operational considerations for running Matchbox in production.&lt;/p&gt;
&lt;h2 id="deployment-architectures"&gt;Deployment Architectures&lt;/h2&gt;
&lt;h3 id="single-host-deployment"&gt;Single-Host Deployment&lt;/h3&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;┌─────────────────────────────────────────────────────┐
│ Provisioning Host │
│ ┌─────────────┐ ┌─────────────┐ │
│ │ Matchbox │ │ dnsmasq │ │
│ │ :8080 HTTP │ │ DHCP/TFTP │ │
│ │ :8081 gRPC │ │ :67,:69 │ │
│ └─────────────┘ └─────────────┘ │
│ │ │ │
│ └──────────┬───────────┘ │
│ │ │
│ /var/lib/matchbox/ │
│ ├── groups/ │
│ ├── profiles/ │
│ ├── ignition/ │
│ └── assets/ │
└─────────────────────────────────────────────────────┘
 │
 │ Network
 ▼
 ┌──────────────┐
 │ PXE Clients │
 └──────────────┘
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;Use case:&lt;/strong&gt; Lab, development, small deployments (&amp;lt;50 machines)&lt;/p&gt;</description></item><item><title>Hardware Specifications</title><link>https://zaba505.github.io/infra/pr-preview/pr-596/rd/analysis/hp_dl360_gen9/specifications/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://zaba505.github.io/infra/pr-preview/pr-596/rd/analysis/hp_dl360_gen9/specifications/</guid><description>&lt;h2 id="system-overview"&gt;System Overview&lt;/h2&gt;
&lt;p&gt;The HP ProLiant DL360 Gen9 is a dual-socket 1U rack server designed for data center and enterprise deployments, also popular in home lab environments due to its performance and manageability.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Generation&lt;/strong&gt;: Gen9 (2014-2017 product cycle)&lt;br&gt;
&lt;strong&gt;Form Factor&lt;/strong&gt;: 1U rack-mountable (19-inch standard rack)&lt;br&gt;
&lt;strong&gt;Dimensions&lt;/strong&gt;: 43.46 x 67.31 x 4.29 cm (17.1 x 26.5 x 1.69 in)&lt;/p&gt;
&lt;h2 id="processor-support"&gt;Processor Support&lt;/h2&gt;
&lt;h3 id="supported-cpu-families"&gt;Supported CPU Families&lt;/h3&gt;
&lt;p&gt;The DL360 Gen9 supports Intel Xeon E5-2600 v3 and v4 series processors:&lt;/p&gt;</description></item><item><title>Network Boot Capabilities</title><link>https://zaba505.github.io/infra/pr-preview/pr-596/rd/analysis/hp_dl360_gen9/network-boot/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://zaba505.github.io/infra/pr-preview/pr-596/rd/analysis/hp_dl360_gen9/network-boot/</guid><description>&lt;h2 id="overview"&gt;Overview&lt;/h2&gt;
&lt;p&gt;The HP ProLiant DL360 Gen9 provides robust network boot capabilities through multiple protocols and firmware interfaces. This makes it particularly well-suited for diskless deployments, automated provisioning, and infrastructure-as-code workflows.&lt;/p&gt;
&lt;h2 id="supported-network-boot-protocols"&gt;Supported Network Boot Protocols&lt;/h2&gt;
&lt;h3 id="pxe-preboot-execution-environment"&gt;PXE (Preboot Execution Environment)&lt;/h3&gt;
&lt;p&gt;The DL360 Gen9 fully supports PXE boot via both legacy BIOS and UEFI firmware modes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Legacy BIOS PXE&lt;/strong&gt;: Traditional PXE implementation using TFTP&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Protocol: PXEv2 (PXE 2.1)&lt;/li&gt;
&lt;li&gt;Network Stack: IPv4 only in legacy mode&lt;/li&gt;
&lt;li&gt;Boot files: &lt;code&gt;pxelinux.0&lt;/code&gt;, &lt;code&gt;undionly.kpxe&lt;/code&gt;, or custom NBP&lt;/li&gt;
&lt;li&gt;DHCP options: Standard options 66 (TFTP server) and 67 (boot filename)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;UEFI PXE&lt;/strong&gt;: Modern UEFI network boot implementation&lt;/p&gt;</description></item><item><title>Network Boot Support</title><link>https://zaba505.github.io/infra/pr-preview/pr-596/rd/analysis/matchbox/network-boot/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://zaba505.github.io/infra/pr-preview/pr-596/rd/analysis/matchbox/network-boot/</guid><description>&lt;h1 id="network-boot-support-in-matchbox"&gt;Network Boot Support in Matchbox&lt;/h1&gt;
&lt;p&gt;Matchbox provides comprehensive network boot support for bare-metal provisioning, supporting multiple boot firmware types and protocols.&lt;/p&gt;
&lt;h2 id="overview"&gt;Overview&lt;/h2&gt;
&lt;p&gt;Matchbox serves as an HTTP entrypoint for network-booted machines but &lt;strong&gt;does not implement DHCP, TFTP, or DNS services itself&lt;/strong&gt;. Instead, it integrates with existing network infrastructure (or companion services like dnsmasq) to provide a complete PXE boot solution.&lt;/p&gt;
&lt;h2 id="boot-protocol-support"&gt;Boot Protocol Support&lt;/h2&gt;
&lt;h3 id="1-pxe-preboot-execution-environment"&gt;1. PXE (Preboot Execution Environment)&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Legacy BIOS support via chainloading to iPXE:&lt;/strong&gt;&lt;/p&gt;</description></item><item><title>Use Case Evaluation</title><link>https://zaba505.github.io/infra/pr-preview/pr-596/rd/analysis/matchbox/evaluation/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://zaba505.github.io/infra/pr-preview/pr-596/rd/analysis/matchbox/evaluation/</guid><description>&lt;h1 id="matchbox-use-case-evaluation"&gt;Matchbox Use Case Evaluation&lt;/h1&gt;
&lt;p&gt;Analysis of Matchbox&amp;rsquo;s suitability for various use cases, strengths, limitations, and comparison with alternative provisioning solutions.&lt;/p&gt;
&lt;h2 id="use-case-fit-analysis"&gt;Use Case Fit Analysis&lt;/h2&gt;
&lt;h3 id="-ideal-use-cases"&gt;✅ Ideal Use Cases&lt;/h3&gt;
&lt;h4 id="1-bare-metal-kubernetes-clusters"&gt;1. Bare-Metal Kubernetes Clusters&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;Scenario:&lt;/strong&gt; Provisioning 10-1000 physical servers for Kubernetes nodes&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Why Matchbox Excels:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ignition-native (perfect for Fedora CoreOS/Flatcar)&lt;/li&gt;
&lt;li&gt;Declarative machine provisioning via Terraform&lt;/li&gt;
&lt;li&gt;Label-based matching (region, role, hardware type)&lt;/li&gt;
&lt;li&gt;Integration with Typhoon Kubernetes distribution&lt;/li&gt;
&lt;li&gt;Minimal OS surface (immutable, container-optimized)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Example workflow:&lt;/strong&gt;&lt;/p&gt;</description></item><item><title>UDM Pro VLAN Configuration &amp; Capabilities</title><link>https://zaba505.github.io/infra/pr-preview/pr-596/rd/analysis/udm_pro/vlans/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://zaba505.github.io/infra/pr-preview/pr-596/rd/analysis/udm_pro/vlans/</guid><description>&lt;h2 id="overview"&gt;Overview&lt;/h2&gt;
&lt;p&gt;The &lt;strong&gt;Ubiquiti Dream Machine Pro (UDM Pro)&lt;/strong&gt; provides robust VLAN support through native 802.1Q tagging, enabling network segmentation for security, performance, and organizational purposes. This document covers VLAN configuration capabilities, port assignments, and VPN integration.&lt;/p&gt;
&lt;h2 id="vlan-fundamentals-on-udm-pro"&gt;VLAN Fundamentals on UDM Pro&lt;/h2&gt;
&lt;h3 id="supported-standards"&gt;Supported Standards&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;802.1Q VLAN Tagging&lt;/strong&gt;: Full support for standard VLAN tagging&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;VLAN Range&lt;/strong&gt;: IDs 1-4094 (standard IEEE 802.1Q range)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Maximum VLANs&lt;/strong&gt;: Up to 32 networks/VLANs per device&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Native VLAN&lt;/strong&gt;: Configurable per port (default: VLAN 1)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="vlan-types"&gt;VLAN Types&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Corporate Network&lt;/strong&gt;&lt;/p&gt;</description></item></channel></rss>